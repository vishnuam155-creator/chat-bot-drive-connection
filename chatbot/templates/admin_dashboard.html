{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Admin Dashboard</h2>
  <div class="stats">
    <div class="stat">Vectors: <strong>{{ vstats.count }}</strong></div>
  </div>

  <h3>Uploaded Documents</h3>
  <table class="table">
    <thead><tr><th>ID</th><th>Name</th><th>Type</th><th>Chunks</th><th>Embedded</th><th>Actions</th></tr></thead>
    <tbody>
      {% for d in docs %}
      <tr>
        <td>{{ d.id }}</td>
        <td>{{ d.name }}</td>
        <td>{{ d.file_type }}</td>
        <td>{{ d.num_chunks }}</td>
        <td>{{ d.embedded }}</td>
        <td>
          <form method="post" action="/api/delete/" onsubmit="return confirm('Delete this document?');">
            {% csrf_token %}
            <input type="hidden" name="doc_id" value="{{ d.id }}"/>
            <button>Delete</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No documents yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
